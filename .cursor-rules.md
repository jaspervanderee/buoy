# Cursor Rules — Buoy Bitcoin

> Keep this concise, actionable, and stable so AI can code confidently.

## Project Overview

* **Name:** Buoy Bitcoin — brand new static HTML site that helps newcomers **compare Bitcoin-only services** by features, ease of use, USP, country availability, custody model, and Lightning support.
* **Outcome Goal:** **10,000 monthly visitors** (validate demand for curated, Bitcoin-only directories + guides).

## Vision & Mission

* **Vision:** A neutral, Bitcoin-only discovery layer that reduces choice overload and nudges users toward self-sovereignty—built with the optimistic, deflationary future Jeff Booth describes.
* **Mission:** Make it effortless for newcomers and time-poor builders to find reliable Bitcoin services that fit their jurisdiction, experience level, and use-case—without overwhelming them.

## Personality (tone for all explanations)

Explain like a **senior front‑end dev** guiding a **complete beginner**: patient, clear, minimal jargon, concrete steps.

## Tech Stack (now) & Infra

* **Frontend:** Static HTML, vanilla CSS, lightweight JavaScript.
* **Infra:** DreamHost (static hosting). DigitalOcean LAMP droplet available (backend).
* **Telemetry:** Umami (privacy‑friendly). Feedback Fish (user feedback).

## Stage, Team

* **Stage:** Pre‑MVP → MVP.
* **Team:** Solo.

## Business Model (ethos‑aligned)

* **Value‑for‑Value (V4V):** Lightning/On‑chain tips (visible in header/footer + service pages).
* **Transparent affiliates** (possibly in the future), clearly labeled, never changing rankings.
* **No paywalls. No altcoins. Minimal tracking (Umami only).**

## Non‑Negotiables (constraints for AI)

* **Bitcoin‑only**. Do not introduce or recommend altcoins.
* **No heavy frameworks**; keep JS minimal; ship fast pages.
* **Performance:** avoid bloated libs; compress images; defer non‑critical JS.

## Repository Facts the AI Can Rely On

* Pages: `index.html`, `about.html`, `compare.html`, `faq.html`, `service.html`.
* Guides: `faq.html`, `about.html`, `what-is-bitcoin.html`, `what-is-lightning.html`.
* Assets: `styles.css`, `script.js`, `compare.js`, `questionnaire.js`.
* Data: `services.json` (catalog), `countries.json` (ISO codes + regions).

## SSG & baked tables (single-service pages)
What’s baked: On single-service pages (e.g. strike.html) we inject the full comparison table at build time between the BUILD markers:

<!-- BUILD:START -->
<div id="comparison-container">
  <div class="logo-row-sticky">
    <div class="feature-values logo-row" id="logo-row-container"></div>
  </div>
  <div id="comparison-table-wrapper"></div>
</div>
<!-- BUILD:END -->


The build step writes a complete .comparison-table inside #comparison-table-wrapper. Keep classes/structure identical to the client renderer so CSS stays consistent (e.g. .comparison-table, .feature-row.{key}, .feature-values, .feature-value[data-service="slug"], label + optional .sublabel).

Client behavior: compare.js must detect a baked table and skip full re-render; after geolocation it hydrates only the features row (per user country/region) by replacing the contents of .feature-row.features .feature-value[data-service="…"]. Reuse getFeaturesForCountry(...) and the existing region mapping logic. Do not touch other rows (fees, profile, etc.). Keep the ratings modal wiring working on baked pages.

Baked detection rule (contract):
const baked = !!document.querySelector('#comparison-table-wrapper .comparison-table');
// If baked: skip building rows; hydrate features row only after country is known.

(If you add data-baked="1" to .comparison-table later, keep the query above working.)

Row/label parity: The baked HTML must use the same row keys the client expects (examples you’ll see in the current renderer: features, fees, user_experience, interface, app_ratings, support, profile, description, founded_in, website, availability, etc.). Prefer pulling the row config from a single shared module (e.g. shared/rows.mjs) that both the SSG renderer and compare.js import to avoid drift.

Fees renderer contract: services.json supports:
string
object with intro
object with intro, tiers[] ({ range, fee }), optional notes
The baked renderer must mirror the client’s renderFees(...) output so pages look the same.

Descriptions: Normalize "\\n\\n" to real paragraphs in baked output (wrap in <p>). (Client already does collapsible descriptions; preserve the same markup hooks/classes.)
Alternatives block (single-service pages): If present below the table, filter alternatives by user location, sort by highest app_ratings, and cap visible items to 5.

Paths: Use root-absolute asset/data paths in baked HTML (e.g. /images/..., /data/services.json) to avoid relative path issues across nested pages.

Service page globals: Single-service pages set window.__BUOY_SERVICE__ and window.__BUOY_SLUG__; if you need the current service in scripts, read those first.

## Data Model & Behavior

* **`services.json` schema (keep stable):**

  * `name`, `category` (Buy | Spend | Store | Merchant | Node), `description`, `website`.
  * `countries` (ISO codes and/or regions like `WW`, `EU`, etc.).
  * `custody_model` (non‑custodial / collaborative / custodial).
  * `platform_availability` (web, iOS, Android, desktop).
  * `features` grouped by region code; each item: `{ text, status: positive|negative|neutral }`.
  * Optional: ratings, KYC requirements, Lightning support, fees (when known).
* **Country/Region filtering:** use `countries.json` and region mappings; honor `WW`.

* **Compare rules:**
  * Compare **only within the same category**.
  * **Mobile:** max 2 services; **Desktop:** max 3 services.
  * Side‑by‑side shows description, custody, platforms, notable features (per region), links.

* **Questionnaire:** lightweight; maps answers (e.g., KYC preference, Lightning, experience) to filters → deep‑link to `compare.html?category=...&services=...`.

## Code Style & CSS Rules

* Keep related selectors close: elements (IDs/classes) that interact or are part of one component should **live together** (e.g., `.hamburger`, `.menu`, `.menu.active`).
* **Media queries grouping:** keep **all** `@media (min-width: …)` and `@media (max-width: …)` blocks **consolidated** in a clearly marked section (prefer end of file), grouped by breakpoint.
* Prefer utility‑like, low‑specificity selectors; avoid deep nesting and `!important`.
* Keep HTML semantic; use aria labels where needed.

## Coding Directives (AI)

* Work in **vanilla HTML/CSS/JS**. Avoid frameworks unless explicitly requested.
* Extend `services.json` **without breaking the schema**. Validate required fields.
* Keep `regionMappings` and country lists in sync when editing geography.
* Maintain compare limits and same‑category checks (2 mobile / 3 desktop).

## Core Instructions (MANDATORY for any code change/refactor/generation)

1. Provide a **step‑by‑step explanation** of what changed.
2. Describe **why** it was changed, including trade‑offs.
3. Highlight **impacts** on performance, readability, or dependencies.
4. **Avoid unnecessary complexity.** Fewer lines > more lines.

## Design (minimal, Buoy palette)
* Tokens:
:root{
  --accent:#ff603b; --accent-hover:#e55a35;
  --text:#000; --muted:#666;
  --bg:#f5f5f5; --surface:#fff; --line:#ddd;
  --font-sans:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
  --radius:8px; --container:1200px;
}

* Classes to reuse
`header`, `hero`, `btn` (btn-primary,btn-ghost), `card`, `compare-table`

* Rules
Light, clean UI; orange accents only; subtle glass look.

## Processes

### GitHub Push Process

1. Confirm branch `main`.
2. Stage: `git add .`
3. Commit: `git commit -m "Describe changes"`
4. Push: `git push`

### Error Fixing

1. Explain the error in simple terms.
2. Suggest likely causes.
3. Show a **minimal, clean fix**.

## Analytics & SEO

* Use Umami for custom events (suggested): `compare_opened`, `compare_added_service`, `compare_view`, `outbound_click`, `questionnaire_start`, `questionnaire_complete`, `tip_click`.
* Keep unique titles/descriptions/OG tags; maintain canonical links; no duplicate content.


---

**When in doubt:** keep it simple, fast, and Bitcoin‑only. Ensure any suggestion respects privacy and sovereignty.
